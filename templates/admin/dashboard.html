{% extends "admin/base.html" %}

{% block content %}
<div class="topbar">
    <div class="titleBlock">
        <h2>Dashboard</h2>
        <p>Overview of all managed blogs and agencies</p>
    </div>
    <div class="actions">
        <a href="/admin/logout" class="btn">Logout</a>
    </div>
</div>

<div class="container">
    <!-- Metrics -->
    <div class="grid cols-2">
        <div class="stat">
            <div class="k">Total Manifests</div>
            <div class="v">{{ metrics.drafts + metrics.in_review + metrics.published_7d }}</div>
            <div class="s">Across all blogs</div>
        </div>
        <div class="stat">
            <div class="k">System Status</div>
            <div class="v" style="color: var(--accent2);">Active</div>
            <div class="s">Queue Processing</div>
        </div>
    </div>

    <!-- Blog Catalog -->
    <div class="panel">
        <div class="panel-header">
            <h4>Blog Catalog</h4>
        </div>
        <div class="tiles">
            {% for blog in blogs %}
            <a href="/admin/blogs/{{ blog.id }}" class="tile">
                <div class="img"></div>
                <div class="shade"></div>
                <div class="inner">
                    <div class="top">
                        <div class="chip">{{ blog.generation_contract_default or 'v1.1' }}</div>
                    </div>
                    <div>
                        <h4>{{ blog.name }}</h4>
                        <div class="domain">{{ blog.domain }}</div>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}