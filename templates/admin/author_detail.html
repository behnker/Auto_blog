{% extends "admin/base.html" %}

{% block title %}Manage Author: {{ author.name }}{% endblock %}
{% block header %}{{ author.name }}{% endblock %}
{% block subheader %}Manage author profile and settings.{% endblock %}

{% block content %}
<section class="page">
    <div class="grid cols-2">
        <!-- Author Details Card -->
        <div class="card">
            <div class="cardHeader">
                <h3>Profile</h3>
            </div>
            <div class="cardBody">
                <form method="POST" action="/admin/authors/save">
                    <input type="hidden" name="author_id" value="{{ author.id }}">

                    <div class="field">
                        <label>Name</label>
                        <input type="text" name="name" value="{{ author.name }}" required>
                    </div>

                    <div class="field">
                        <label>Assigned Voice</label>
                        <select name="voice_id">
                            <option value="">-- No Voice Assigned --</option>
                            {% for v in voices %}
                            <option value="{{ v.id }}" {% if author.voice_ids and v.id in author.voice_ids %}selected{%
                                endif %}>
                                {{ v.name }}
                            </option>
                            {% endfor %}
                        </select>
                        <small style="color:var(--muted);">Determines the writing style for this author.</small>
                    </div>

                    <div class="field">
                        <label>Bio</label>
                        <textarea name="bio" rows="4">{{ author.bio }}</textarea>
                    </div>

                    <div class="field">
                        <label>Airtable ID</label>
                        <input type="text" value="{{ author.id }}" readonly disabled class="mono" style="opacity:0.5;">
                    </div>

                    <div style="margin-top:20px; text-align:right;">
                        <button type="submit" class="btn primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Stats or Config -->
        <div class="card">
            <div class="cardHeader">
                <h3>Performance</h3>
            </div>
            <div class="cardBody">
                <div class="empty-state">
                    <p>Performance metrics coming in Phase 5.</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}